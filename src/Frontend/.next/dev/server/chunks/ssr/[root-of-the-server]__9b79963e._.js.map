{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/Navbar.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function Navbar() {\r\n  const [user, setUser] = useState(null);          \r\n  const [isCardOpen, setIsCardOpen] = useState(false);\r\n  const [setOpen] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      const stored = typeof window !== \"undefined\" ? localStorage.getItem(\"user\") : null;\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n    } catch {\r\n      setUser(null);\r\n    }\r\n\r\n    const onAuth = () => {\r\n      try {\r\n        const s = localStorage.getItem(\"user\");\r\n        setUser(s ? JSON.parse(s) : null);\r\n      } catch {\r\n        setUser(null);\r\n      }\r\n    };\r\n    window.addEventListener(\"auth:changed\", onAuth);\r\n    return () => window.removeEventListener(\"auth:changed\", onAuth);\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await fetch(\"/api/users/logout\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Logout API call failed\", err);\r\n    }\r\n\r\n    try {\r\n      localStorage.removeItem(\"user\");\r\n    } catch {}\r\n\r\n    window.location.href = \"/\";\r\n    \r\n    setUser(null);\r\n    setIsCardOpen(false);\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    if (!user) return;\r\n    if (!confirm(\"Yakin hapus akun secara permanen? Tindakan ini tidak bisa dibatalkan.\")) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const id = user?._id ?? user?.user_id ?? user?.id;\r\n      if (!id) throw new Error(\"User ID tidak ditemukan.\");\r\n\r\n      const res = await fetch(`/api/users/${id}`, { method: \"DELETE\" });\r\n      const data = await res.json().catch(() => ({}));\r\n      if (!res.ok) throw new Error(data.error || \"Gagal menghapus akun.\");\r\n\r\n      try { localStorage.removeItem(\"user\"); } catch {}\r\n      setUser(null);\r\n      setOpen(false);\r\n      alert(\"Akun kamu sudah dihapus.\");\r\n    } catch (e) {\r\n      alert(e instanceof Error ? e.message : \"Gagal menghapus akun.\");\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"w-full sticky top-0 z-40 bg-white/80 backdrop-blur shadow\">\r\n      <div className=\"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between\">\r\n        <Link href=\"/\" className=\"text-2xl font-extrabold tracking-wide text-indigo-600\">\r\n          SMARTPARK\r\n        </Link>\r\n\r\n        <nav className=\"flex items-center gap-3\">\r\n          {!user ? (\r\n            <>\r\n              <Link href=\"/login\" className=\"px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium hover:opacity-90\">\r\n                Login\r\n              </Link>\r\n              <Link href=\"/register\" className=\"px-4 py-2 rounded-full bg-indigo-50 text-indigo-700 text-sm font-medium hover:bg-indigo-100\">\r\n                Register\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <span className=\"text-lg text-indigo-600\">Welcome, {user.name}</span>\r\n              <div className=\"relative flex items-center gap-2\">\r\n                <div\r\n                  className=\"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center cursor-pointer\"\r\n                  onClick={() => setIsCardOpen(!isCardOpen)}\r\n                >\r\n                  <span>{user.name?.charAt(0).toUpperCase()}</span>\r\n                </div>\r\n\r\n                {isCardOpen && (\r\n                  <div className=\"absolute top-12 right-0 w-56 bg-white p-4 rounded-xl shadow-lg flex flex-col items-start gap-3\">\r\n                    <p className=\"font-semibold\">{user.name}</p>\r\n                    {user.role && <span className=\"font-medium text-indigo-600\">{user.role}</span>}\r\n\r\n                    <button\r\n                      onClick={handleDeleteAccount}\r\n                      disabled={deleting}\r\n                      className=\"text-sm text-red-600 hover:text-red-800 disabled:opacity-60\"\r\n                    >\r\n                      {deleting ? \"Deleting...\" : \"Delete Account\"}\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      className=\"px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700\"\r\n                    >\r\n                      Log out\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </nav>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/GuestLanding.tsx"],"sourcesContent":["export default function GuestLanding() {\r\n  return (\r\n    <section className=\"text-center space-y-5\">\r\n      <h1 className=\"text-4xl md:text-5xl font-extrabold text-indigo-600\">\r\n        SMARTPARK\r\n      </h1>\r\n      <p className=\"text-gray-600 text-lg\">\r\n        Temukan pengalaman parkir cerdas bersama SmartPark üöó‚ú®\r\n      </p>\r\n      <div className=\"flex items-center justify-center gap-3 mt-4\">\r\n        <a\r\n          href=\"/login\"\r\n          className=\"px-6 py-2 rounded-full bg-indigo-600 text-white font-medium hover:opacity-90\"\r\n        >\r\n          Login\r\n        </a>\r\n        <a\r\n          href=\"/register\"\r\n          className=\"px-6 py-2 rounded-full bg-indigo-50 text-indigo-700 font-medium hover:bg-indigo-100\"\r\n        >\r\n          Register\r\n        </a>\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAAe,SAAS;IACtB,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAG,WAAU;0BAAsD;;;;;;0BAGpE,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAGrC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/UserDashboard.tsx"],"sourcesContent":["type UserDashboardProps = {\r\n  user: {\r\n    name: string;\r\n  };\r\n};\r\n\r\nexport default function UserDashboard({ user }: UserDashboardProps) {\r\n  return (\r\n    <div className=\"text-center space-y-4\">\r\n      <h1 className=\"text-3xl font-bold text-indigo-600\">User Page üëã</h1>\r\n      <p className=\"text-gray-600\">\r\n        Halo, <span className=\"font-semibold\">{user.name}</span>! Selamat datang\r\n        di SmartPark.\r\n      </p>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAMe,SAAS,cAAc,EAAE,IAAI,EAAsB;IAChE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,8OAAC;gBAAE,WAAU;;oBAAgB;kCACrB,8OAAC;wBAAK,WAAU;kCAAiB,KAAK,IAAI;;;;;;oBAAQ;;;;;;;;;;;;;AAKhE","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/AdminDashboard.tsx"],"sourcesContent":["type AdminDashboardProps = {\r\n  user: {\r\n    name: string;\r\n  };\r\n};\r\n\r\nexport default function AdminDashboard({ user }: AdminDashboardProps) {\r\n  return (\r\n    <div className=\"text-center space-y-4\">\r\n      <h1 className=\"text-3xl font-bold text-indigo-600\">Admin Dashboard üõ†Ô∏è</h1>\r\n      <p className=\"text-gray-600\">\r\n        Selamat datang kembali,{\" \"}\r\n        <span className=\"font-semibold\">{user.name}</span>!\r\n      </p>\r\n      <div className=\"flex flex-col sm:flex-row items-center justify-center gap-3 mt-4\">\r\n        <a\r\n          href=\"/admin/users\"\r\n          className=\"px-5 py-2 bg-indigo-600 text-white rounded-full hover:opacity-90\"\r\n        >\r\n          Kelola Pengguna\r\n        </a>\r\n        <a\r\n          href=\"/admin/reports\"\r\n          className=\"px-5 py-2 bg-indigo-50 text-indigo-700 rounded-full hover:bg-indigo-100\"\r\n        >\r\n          Lihat Laporan\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAMe,SAAS,eAAe,EAAE,IAAI,EAAuB;IAClE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,8OAAC;gBAAE,WAAU;;oBAAgB;oBACH;kCACxB,8OAAC;wBAAK,WAAU;kCAAiB,KAAK,IAAI;;;;;;oBAAQ;;;;;;;0BAEpD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\n\r\nimport GuestLanding from \"../components/home/GuestLanding\";\r\nimport UserDashboard from \"../components/home/UserDashboard\";\r\nimport AdminDashboard from \"../components/home/AdminDashboard\";\r\n\r\ntype AppUser = {\r\n  _id: string;\r\n  name: string;\r\n  email: string;\r\n  role?: \"user\" | \"admin\";\r\n};\r\n\r\nexport default function HomePage() {\r\n  const [user, setUser] = useState<AppUser | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/users/me\", { credentials: \"include\" })\r\n      .then((r) => (r.ok ? r.json() : null))\r\n      .then((d) => setUser(d?.user ?? null))\r\n      .catch(() => setUser(null))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const renderContent = () => {\r\n    if (loading) {\r\n      return <div className=\"text-gray-500 animate-pulse\">Loading...</div>;\r\n    }\r\n\r\n    if (!user) {\r\n      return <GuestLanding />;\r\n    }\r\n\r\n    if (user.role === \"admin\") {\r\n      return <AdminDashboard user={user} />;\r\n    }\r\n\r\n    return <UserDashboard user={user} />;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"min-h-screen flex flex-col items-center justify-center px-4\">\r\n        {renderContent()}\r\n      </main>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AAPA;;;;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAiB;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,iBAAiB;YAAE,aAAa;QAAU,GAC7C,IAAI,CAAC,CAAC,IAAO,EAAE,EAAE,GAAG,EAAE,IAAI,KAAK,MAC/B,IAAI,CAAC,CAAC,IAAM,QAAQ,GAAG,QAAQ,OAC/B,KAAK,CAAC,IAAM,QAAQ,OACpB,OAAO,CAAC,IAAM,WAAW;IAC9B,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI,SAAS;YACX,qBAAO,8OAAC;gBAAI,WAAU;0BAA8B;;;;;;QACtD;QAEA,IAAI,CAAC,MAAM;YACT,qBAAO,8OAAC,iKAAY;;;;;QACtB;QAEA,IAAI,KAAK,IAAI,KAAK,SAAS;YACzB,qBAAO,8OAAC,mKAAc;gBAAC,MAAM;;;;;;QAC/B;QAEA,qBAAO,8OAAC,kKAAa;YAAC,MAAM;;;;;;IAC9B;IAEA,qBACE;;0BACE,8OAAC,mJAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;AAIT","debugId":null}}]
}
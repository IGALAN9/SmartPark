{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/Navbar.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function Navbar() {\r\n  const [user, setUser] = useState(null);          \r\n  const [isCardOpen, setIsCardOpen] = useState(false);\r\n  const [setOpen] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n\r\n  \r\n  useEffect(() => {\r\n    try {\r\n      const stored = typeof window !== \"undefined\" ? localStorage.getItem(\"user\") : null;\r\n      setUser(stored ? JSON.parse(stored) : null);\r\n    } catch {\r\n      setUser(null);\r\n    }\r\n\r\n    const onAuth = () => {\r\n      try {\r\n        const s = localStorage.getItem(\"user\");\r\n        setUser(s ? JSON.parse(s) : null);\r\n      } catch {\r\n        setUser(null);\r\n      }\r\n    };\r\n    window.addEventListener(\"auth:changed\", onAuth);\r\n    return () => window.removeEventListener(\"auth:changed\", onAuth);\r\n  }, []);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await fetch(\"/api/users/logout\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      });\r\n    } catch (err) {\r\n      console.error(\"Logout API call failed\", err);\r\n    }\r\n\r\n    try {\r\n      localStorage.removeItem(\"user\");\r\n    } catch {}\r\n\r\n    window.location.href = \"/\";\r\n    \r\n    setUser(null);\r\n    setIsCardOpen(false);\r\n  };\r\n\r\n  const handleDeleteAccount = async () => {\r\n    if (!user) return;\r\n    if (!confirm(\"Yakin hapus akun secara permanen? Tindakan ini tidak bisa dibatalkan.\")) return;\r\n\r\n    setDeleting(true);\r\n    try {\r\n      const id = user?._id ?? user?.user_id ?? user?.id;\r\n      if (!id) throw new Error(\"User ID tidak ditemukan.\");\r\n\r\n      const res = await fetch(`/api/users/${id}`, { method: \"DELETE\" });\r\n      const data = await res.json().catch(() => ({}));\r\n      if (!res.ok) throw new Error(data.error || \"Gagal menghapus akun.\");\r\n\r\n      try { localStorage.removeItem(\"user\"); } catch {}\r\n      setUser(null);\r\n      setOpen(false);\r\n      alert(\"Akun kamu sudah dihapus.\");\r\n    } catch (e) {\r\n      alert(e instanceof Error ? e.message : \"Gagal menghapus akun.\");\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"w-full sticky top-0 z-40 bg-white/80 backdrop-blur shadow\">\r\n      <div className=\"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between\">\r\n        <Link href=\"/\" className=\"text-2xl font-extrabold tracking-wide text-indigo-600\">\r\n          SMARTPARK\r\n        </Link>\r\n\r\n        <nav className=\"flex items-center gap-3\">\r\n          {!user ? (\r\n            <>\r\n              <Link href=\"/login\" className=\"px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium hover:opacity-90\">\r\n                Login\r\n              </Link>\r\n              <Link href=\"/register\" className=\"px-4 py-2 rounded-full bg-indigo-50 text-indigo-700 text-sm font-medium hover:bg-indigo-100\">\r\n                Register\r\n              </Link>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <span className=\"text-lg text-indigo-600\">Welcome, {user.name}</span>\r\n              <div className=\"relative flex items-center gap-2\">\r\n                <div\r\n                  className=\"w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center cursor-pointer\"\r\n                  onClick={() => setIsCardOpen(!isCardOpen)}\r\n                >\r\n                  <span>{user.name?.charAt(0).toUpperCase()}</span>\r\n                </div>\r\n\r\n                {isCardOpen && (\r\n                  <div className=\"absolute top-12 right-0 w-56 bg-white p-4 rounded-xl shadow-lg flex flex-col items-start gap-3\">\r\n                    <p className=\"font-semibold\">{user.name}</p>\r\n                    {user.role && <span className=\"font-medium text-indigo-600\">{user.role}</span>}\r\n\r\n                    <button\r\n                      onClick={handleDeleteAccount}\r\n                      disabled={deleting}\r\n                      className=\"text-sm text-red-600 hover:text-red-800 disabled:opacity-60\"\r\n                    >\r\n                      {deleting ? \"Deleting...\" : \"Delete Account\"}\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      className=\"px-4 py-2 rounded-full bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700\"\r\n                    >\r\n                      Log out\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </nav>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/GuestLanding.tsx"],"sourcesContent":["export default function GuestLanding() {\r\n  return (\r\n    <section className=\"text-center space-y-5\">\r\n      <h1 className=\"text-4xl md:text-5xl font-extrabold text-indigo-600\">\r\n        SMARTPARK\r\n      </h1>\r\n      <p className=\"text-gray-600 text-lg\">\r\n        Temukan pengalaman parkir cerdas bersama SmartPark ðŸš—âœ¨\r\n      </p>\r\n      <div className=\"flex items-center justify-center gap-3 mt-4\">\r\n        <a\r\n          href=\"/login\"\r\n          className=\"px-6 py-2 rounded-full bg-indigo-600 text-white font-medium hover:opacity-90\"\r\n        >\r\n          Login\r\n        </a>\r\n        <a\r\n          href=\"/register\"\r\n          className=\"px-6 py-2 rounded-full bg-indigo-50 text-indigo-700 font-medium hover:bg-indigo-100\"\r\n        >\r\n          Register\r\n        </a>\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAAe,SAAS;IACtB,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAG,WAAU;0BAAsD;;;;;;0BAGpE,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAGrC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/UserDashboard.tsx"],"sourcesContent":["type UserDashboardProps = {\r\n  user: {\r\n    name: string;\r\n  };\r\n};\r\n\r\nexport default function UserDashboard({ user }: UserDashboardProps) {\r\n  return (\r\n    <div className=\"text-center space-y-4\">\r\n      <h1 className=\"text-3xl font-bold text-indigo-600\">User Page ðŸ‘‹</h1>\r\n      <p className=\"text-gray-600\">\r\n        Halo, <span className=\"font-semibold\">{user.name}</span>! Selamat datang\r\n        di SmartPark.\r\n      </p>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;;AAMe,SAAS,cAAc,EAAE,IAAI,EAAsB;IAChE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,8OAAC;gBAAE,WAAU;;oBAAgB;kCACrB,8OAAC;wBAAK,WAAU;kCAAiB,KAAK,IAAI;;;;;;oBAAQ;;;;;;;;;;;;;AAKhE","debugId":null}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/admin/AddMallModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ntype AddMallModalProps = {\r\n  onClose: () => void;\r\n  onSuccess: () => void;\r\n};\r\n\r\nexport default function AddMallModal({ onClose, onSuccess }: AddMallModalProps) {\r\n  const [name, setName] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      // Panggil API yang sudah kita buat\r\n      const res = await fetch(\"/api/malls\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ name, address }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        throw new Error(data.error || \"Gagal menambahkan mall\");\r\n      }\r\n      \r\n      onSuccess(); // Tutup modal dan refresh data di parent\r\n\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Terjadi kesalahan\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    // Backdrop\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\r\n      \r\n      {/* Modal Content */}\r\n      <div className=\"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md\">\r\n        <h3 className=\"text-2xl font-bold text-center text-indigo-600 mb-6\">\r\n          ADD MALL\r\n        </h3>\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Mall Name\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Mall Address\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={address}\r\n              onChange={(e) => setAddress(e.target.value)}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n\r\n          <div className=\"flex items-center justify-end gap-3 pt-4\">\r\n             <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-5 py-2 rounded-full text-gray-700 hover:bg-gray-100\"\r\n              disabled={loading}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-6 py-2 rounded-full bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-50\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? \"Adding...\" : \"Add Mall\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,aAAa,EAAE,OAAO,EAAE,SAAS,EAAqB;IAC5E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACF,mCAAmC;YACnC,MAAM,MAAM,MAAM,MAAM,cAAc;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAM;gBAAQ;YACvC;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,aAAa,yCAAyC;QAExD,EAAE,OAAO,GAAG;YACV,SAAS,aAAa,QAAQ,EAAE,OAAO,GAAG;QAC5C,SAAU;YACR,WAAW;QACb;IACF;IAEA,OACE,WAAW;kBACX,8OAAC;QAAI,WAAU;kBAGb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAsD;;;;;;8BAGpE,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,WAAU;oCACV,QAAQ;;;;;;;;;;;;sCAGZ,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oCAC1C,WAAU;oCACV,QAAQ;;;;;;;;;;;;wBAIX,uBAAS,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;sCAE/C,8OAAC;4BAAI,WAAU;;8CACZ,8OAAC;oCACA,MAAK;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,WAAU;oCACV,UAAU;8CAET,UAAU,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOvC","debugId":null}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/components/home/AdminDashboard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport AddMallModal from \"./admin/AddMallModal\"; \r\n\r\n// Definisikan tipe data yang akan kita terima dari API\r\ntype FloorData = {\r\n  id: string;\r\n  name: string;\r\n  available: number;\r\n  total: number;\r\n};\r\n\r\ntype MallData = {\r\n  id: string;\r\n  name: string;\r\n  address: string;\r\n  floors: FloorData[];\r\n};\r\n\r\n// Props 'user' tetap ada dari file asli Anda\r\ntype AdminDashboardProps = {\r\n  user: {\r\n    name: string;\r\n  };\r\n};\r\n\r\nexport default function AdminDashboard({ user }: AdminDashboardProps) {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingMallId, setEditingMallId] = useState<string | null>(null);\r\n  const [isDeleting, setIsDeleting] = useState(false); // BARU: State untuk disable tombol\r\n  // State untuk menampung data dari API\r\n  const [malls, setMalls] = useState<MallData[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Fungsi untuk fetch data\r\n  const fetchMalls = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      const res = await fetch(\"/api/malls\"); // Panggil API yang sudah kita buat\r\n      if (!res.ok) {\r\n        throw new Error(\"Gagal mengambil data. Pastikan Anda login sebagai Admin.\");\r\n      }\r\n      const data = await res.json();\r\n      setMalls(data);\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Terjadi kesalahan\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch data saat komponen pertama kali dimuat\r\n  useEffect(() => {\r\n    fetchMalls();\r\n  }, []);\r\n\r\n  const handleAddMallSuccess = () => {\r\n    setIsModalOpen(false);\r\n    fetchMalls(); // Ambil ulang data setelah berhasil menambah mall\r\n    alert(\"Mall berhasil ditambahkan!\");\r\n  };\r\n\r\n  const handleDeleteMall = async (mallId: string, mallName: string) => {\r\n    if (!window.confirm(`Yakin ingin menghapus \"${mallName}\"?\\nSEMUA lantai dan slot di dalamnya akan terhapus permanen.`)) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      const res = await fetch(`/api/malls/${mallId}`, { method: \"DELETE\" });\r\n      if (!res.ok) {\r\n        const data = await res.json().catch(() => ({}));\r\n        throw new Error(data.error || \"Gagal menghapus mall\");\r\n      }\r\n      alert(`\"${mallName}\" berhasil dihapus.`);\r\n      fetchMalls(); // Refresh list\r\n    } catch (e) {\r\n      alert(e instanceof Error ? e.message : \"Terjadi kesalahan\");\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // ----------------------------------------------------\r\n  // FUNGSI BARU: Hapus Floor (Lot)\r\n  // ----------------------------------------------------\r\n  const handleDeleteFloor = async (floorId: string, floorName: string) => {\r\n    if (!window.confirm(`Yakin ingin menghapus \"${floorName}\"?\\nSEMUA slot di dalamnya akan terhapus permanen.`)) {\r\n      return;\r\n    }\r\n\r\n    setIsDeleting(true);\r\n    try {\r\n      const res = await fetch(`/api/parking-lots/${floorId}`, { method: \"DELETE\" });\r\n      if (!res.ok) {\r\n        const data = await res.json().catch(() => ({}));\r\n        throw new Error(data.error || \"Gagal menghapus lantai\");\r\n      }\r\n      alert(`\"${floorName}\" berhasil dihapus.`);\r\n      fetchMalls(); // Refresh list\r\n    } catch (e) {\r\n      alert(e instanceof Error ? e.message : \"Terjadi kesalahan\");\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"text-center p-8 text-lg\">Memuat data parkir...</div>;\r\n  if (error) return <div className=\"text-center p-8 text-lg text-red-600\">Error: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"w-full max-w-4xl mx-auto py-8 px-4\">\r\n      {/* Judul Halaman */}\r\n      <h2 className=\"text-3xl font-bold text-center text-indigo-600 mb-6\">\r\n        Available Parking\r\n      </h2>\r\n\r\n      {/* Tombol Add Mall */}\r\n      <div className=\"text-center mb-8\">\r\n        <button\r\n          onClick={() => setIsModalOpen(true)}\r\n          className=\"px-6 py-3 bg-indigo-600 text-white rounded-full font-semibold shadow-lg hover:bg-indigo-700 transition-colors\"\r\n        >\r\n          ADD MALL\r\n        </button>\r\n      </div>\r\n\r\n      {/* Daftar Mall */}\r\n      <div className=\"space-y-6\">\r\n        {malls.length === 0 && (\r\n          <p className=\"text-center text-gray-500\">Belum ada mall terdaftar. Klik ADD MALL untuk memulai.</p>\r\n        )}\r\n\r\n        {malls.map((mall) => (\r\n          <div key={mall.id} className=\"bg-white p-6 rounded-2xl shadow-md\">\r\n            <div className=\"flex flex-col sm:flex-row justify-between sm:items-center\">\r\n              <div>\r\n                <h3 className=\"text-2xl font-bold text-indigo-700\">{mall.name}</h3>\r\n                <p className=\"text-sm text-gray-500 mt-1 truncate max-w-md\">{mall.address}</p>\r\n              </div>\r\n              <button \r\n                onClick={() => setEditingMallId(editingMallId === mall.id ? null : mall.id)}\r\n                className=\"mt-4 sm:mt-0 px-5 py-2 bg-indigo-100 text-indigo-700 rounded-full font-medium text-sm hover:bg-indigo-200\"\r\n              >\r\n                {editingMallId === mall.id ? \"Close\" : \"Details>>>\"}\r\n              </button>\r\n              {/* --- TOMBOL DELETE MALL BARU --- */}\r\n              <button\r\n                  onClick={() => handleDeleteMall(mall.id, mall.name)}\r\n                  disabled={isDeleting}\r\n                  className=\"px-5 py-2 bg-red-100 text-red-700 rounded-full font-medium text-sm hover:bg-red-200 disabled:opacity-50\"\r\n               >\r\n                Delete\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n              <div className=\"flex flex-wrap gap-x-6 gap-y-2\">\r\n                {mall.floors.length > 0 ? mall.floors.map((floor) => (\r\n                  <span key={floor.id} className=\"font-medium text-gray-700\">\r\n                    {floor.name} <b className=\"text-gray-900\">{floor.available}/{floor.total}</b>\r\n                  </span>\r\n                )) : (\r\n                  <span className=\"text-sm text-gray-500\">Belum ada lantai terdaftar.</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Bagian Edit Floor */}\r\n            {editingMallId === mall.id && (\r\n              <div className=\"mt-4 pt-4 border-t border-indigo-200 bg-indigo-50 p-4 rounded-lg\">\r\n                {mall.floors.map((floor) => (\r\n                  <div key={floor.id} className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"font-medium\">{floor.name} ({floor.available}/{floor.total} slots)</span>\r\n                    <button className=\"px-4 py-1 bg-white text-indigo-700 rounded-full text-sm shadow-sm hover:bg-gray-50\">\r\n                      Edit\r\n                    </button>\r\n                    {/* --- TOMBOL DELETE FLOOR BARU --- */}\r\n                      <button\r\n                        onClick={() => handleDeleteFloor(floor.id, floor.name)}\r\n                        disabled={isDeleting}\r\n                        className=\"px-4 py-1 bg-white text-red-700 rounded-full text-sm shadow-sm hover:bg-red-100 disabled:opacity-50\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                  </div>\r\n                ))}\r\n                {/* TODO: Buat logika Add Floor */}\r\n                <button className=\"mt-3 w-full px-4 py-2 bg-indigo-600 text-white rounded-full text-sm font-medium hover:bg-indigo-700\">\r\n                  Add Floor\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Modal Add Mall (akan muncul jika isModalOpen true) */}\r\n      {isModalOpen && (\r\n        <AddMallModal \r\n          onClose={() => setIsModalOpen(false)} \r\n          onSuccess={handleAddMallSuccess}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 848, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Galang/Documents/Github/SmartPark/src/Frontend/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\n\r\nimport GuestLanding from \"../components/home/GuestLanding\";\r\nimport UserDashboard from \"../components/home/UserDashboard\";\r\nimport AdminDashboard from \"../components/home/AdminDashboard\";\r\n\r\ntype AppUser = {\r\n  _id: string;\r\n  name: string;\r\n  email: string;\r\n  role?: \"user\" | \"admin\";\r\n};\r\n\r\nexport default function HomePage() {\r\n  const [user, setUser] = useState<AppUser | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/users/me\", { credentials: \"include\" })\r\n      .then((r) => (r.ok ? r.json() : null))\r\n      .then((d) => setUser(d?.user ?? null))\r\n      .catch(() => setUser(null))\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const renderContent = () => {\r\n    if (loading) {\r\n      return <div className=\"text-gray-500 animate-pulse\">Loading...</div>;\r\n    }\r\n\r\n    if (!user) {\r\n      return <GuestLanding />;\r\n    }\r\n\r\n    if (user.role === \"admin\") {\r\n      return <AdminDashboard user={user} />;\r\n    }\r\n\r\n    return <UserDashboard user={user} />;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"min-h-screen flex flex-col items-center justify-center px-4\">\r\n        {renderContent()}\r\n      </main>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AAPA;;;;;;;AAgBe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAiB;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,iBAAiB;YAAE,aAAa;QAAU,GAC7C,IAAI,CAAC,CAAC,IAAO,EAAE,EAAE,GAAG,EAAE,IAAI,KAAK,MAC/B,IAAI,CAAC,CAAC,IAAM,QAAQ,GAAG,QAAQ,OAC/B,KAAK,CAAC,IAAM,QAAQ,OACpB,OAAO,CAAC,IAAM,WAAW;IAC9B,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI,SAAS;YACX,qBAAO,8OAAC;gBAAI,WAAU;0BAA8B;;;;;;QACtD;QAEA,IAAI,CAAC,MAAM;YACT,qBAAO,8OAAC,iKAAY;;;;;QACtB;QAEA,IAAI,KAAK,IAAI,KAAK,SAAS;YACzB,qBAAO,8OAAC,mKAAc;gBAAC,MAAM;;;;;;QAC/B;QAEA,qBAAO,8OAAC,kKAAa;YAAC,MAAM;;;;;;IAC9B;IAEA,qBACE;;0BACE,8OAAC,mJAAM;;;;;0BACP,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;AAIT","debugId":null}}]
}